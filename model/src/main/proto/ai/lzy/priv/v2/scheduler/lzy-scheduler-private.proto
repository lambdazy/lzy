syntax = "proto3";

package ai.lzy.priv.v2.scheduler;

option java_outer_classname = "SchedulerPrivateApi";
option java_package = "ai.lzy.priv.v2.lzy";

service SchedulerPrivate {
  rpc RegisterServant (RegisterServantRequest) returns (RegisterServantResponse);
  rpc ServantProgress (ServantProgressRequest) returns (ServantProgressResponse);
  rpc HeartBit (ServantHeartBitRequest) returns (ServantHeartBitResponse);
}

// =========Register servant=========

message RegisterServantRequest {
  string servantToken = 1;
  string servantUri = 2;
}
message RegisterServantResponse {}

// ========= Progress ==========
message Started {}
message Configured {
  int32 rc = 1;
  string description = 2;
}
message Concluded {}
message CommunicationCompleted {}
message ExecutionConcluded {
  int32 rc = 1;
  string description = 2;
}

message ServantProgress {
  oneof status {
    Started start = 1;
    Configured configured = 2;
    ExecutionConcluded executeStop = 3;
    CommunicationCompleted communicationCompleted = 4;
    Concluded exit = 5;
  }
}

message ServantProgressRequest {
  string servantToken = 1;
  ServantProgress progress = 2;
}
message ServantProgressResponse {}

// ========= Heart bit ==========

message ServantHeartBitRequest {}
message ServantHeartBitResponse {}