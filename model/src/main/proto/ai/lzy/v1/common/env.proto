syntax = "proto3";

package ai.lzy.v1.common;

option java_outer_classname = "LME";
option java_package = "ai.lzy.v1.common";

message EnvSpec {
  BaseEnv baseEnv = 1 [deprecated=true];  // TODO(artolord) remove after next minor
  AuxEnv auxEnv = 2 [deprecated=true];

  /* optional */ string dockerImage = 3;
  /* optional */ map<string, string> envVariables = 4;

  oneof env {
    PythonEnv pyenv = 5;
    ProcessEnv process_env = 6;
  }
}

message BaseEnv {
  string name = 1;
}

message AuxEnv {
  oneof env {
    PythonEnv pyenv = 1;
  }
}

message PythonEnv {
  string name = 1;
  string yaml = 2;
  repeated LocalModule localModules = 3;
}

message ProcessEnv {}

message LocalModule {
  string name = 1;
  // todo: ssokolvyak -- rename to url
  string uri = 2;
}

message Provisioning {
  message Tag {
    string tag = 1;
  }
  repeated Tag tags = 1;
}
